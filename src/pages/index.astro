---
// Web Page - Primitiva
export const prerender = true;
import WebLayout from '../layouts/WebLayout.astro';
import HeaderWeb from '../components/web/HeaderWeb.astro';
import TechOverview from '../components/web/TechOverview.astro';
// We replace the standard Hero (projects grid) with our filtered WebHero
import WebHero from '../components/web/WebHero.astro';

// Web Specific Interactive Components
import WebServices from '../components/web/WebServices';
import WebTestimonials from '../components/web/WebTestimonials';
import WebFAQ from '../components/web/WebFAQ';
import WebFooter from '../components/web/WebFooter.astro';
import PerformanceInterface from '../components/web/PerformanceInterface.astro';
import WebIdentity from '../components/web/WebIdentity.astro';
import WebAbout from '../components/web/WebAbout.astro';
import WebProcessManifesto from '../components/web/WebProcessManifesto.astro';
import thumbImg from '../assets/primitiva/thumb.jpg?url';

const title = "Desenvolvimento de Sites Rápidos e Otimizados | Primitiva";
const description = "Criação de sites de alta performance focada em conversão e SEO. Next.js, Astro e Design Premium.";

// JSON-LD Structured Data
const structuredData = {
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "Primitiva — Desenvolvimento Web de Alta Performance",
  "image": `https://dev.primitiva.cc${thumbImg}`,
  "@id": "https://dev.primitiva.cc",
  "url": "https://dev.primitiva.cc",
  "priceRange": "$$$",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Juiz de Fora",
    "addressRegion": "MG",
    "addressCountry": "BR"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": -21.7642,
    "longitude": -43.3503
  },
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday"
    ],
    "opens": "09:00",
    "closes": "18:00"
  },
  "sameAs": [
    "https://www.instagram.com/primitiva.cc",
    "https://www.behance.net/primitiva"
  ]
};
---

<WebLayout title={title} description={description}>
  <main class="relative flex w-full flex-col">
    <!-- Header with modified Headline for Web -->
    <HeaderWeb transition:persist />
    
    <!-- Structured Data (Moved after header to avoid top-offset issues) -->
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    <!-- Manifesto: O Fim da Internet Industrial -->
    <WebIdentity />
    
    <!-- Interactive Web Services Accordion -->
    <WebServices client:visible />
    
    <!-- Performance X-Ray Section -->
    <PerformanceInterface />
    
    <!-- Tech Overview (Matched with original /web) -->
    <TechOverview />

    <!-- Manifesto do Processo -->
    <WebProcessManifesto />

    <!-- Filtered Projects Grid (Only Web) -->
    <WebHero />

    <!-- Quem Somos (Célula) -->
    <WebAbout />

    {/* SEÇÃO LIVRE: Dali para baixo o scroll volta a ser natural */}
    <div id="free-zone">
      <!-- Interactive Web Testimonials Carousel -->
      <WebTestimonials client:visible />

      <!-- Interactive Web FAQ Accordion -->
      <WebFAQ client:visible />
      
      <!-- Footer with CTA tracking (Web Specific) -->
      <WebFooter />
    </div>
  </main>
</WebLayout>

<style is:global>
  /**
   * HYBRID NATIVE AUTO-SCROLL (SCROLL SNAP)
   * MOBILE: Mandatory snap only between Hero and Identity.
   * DESKTOP: Full mandatory snap sequence across all sections.
   */
  html {
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
    scroll-padding-top: 0px; 
  }

  /* 
     GLOBAL SNAP TARGETS (Mobile & Desktop)
     This ensures the transition from Hero to Identity is always mandatory.
  */
  #hero,
  #identity {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }

  /* 
     DESKTOP ONLY SNAP TARGETS
     Maintains the premium feel for larger screens throughout the page.
  */
  @media (min-width: 1024px) {
    #expertise,
    #performance,
    #tech,
    #manifesto, 
    #portfolio,
    #about,
    #free-zone {
      scroll-snap-align: start;
      scroll-snap-stop: always;
    }
  }

  /* 
     MOBILE FLUIDITY:
     From Expertise downwards, we release the snap so user can scroll naturally.
  */
  @media (max-width: 1023px) {
    #expertise,
    #performance,
    #tech,
    #manifesto, 
    #portfolio,
    #about,
    #free-zone {
      scroll-snap-align: none;
    }
  }

  /* Header stays neutral */
  header {
    scroll-snap-align: none;
  }
</style>
