---
// src/components/web/WebAbout.astro
import { Image } from 'astro:assets';
import giovaniImg from '../../assets/primitiva/giovani.webp';
import temponeImg from '../../assets/primitiva/tempone.webp';
import giovaniRespImg from '../../assets/primitiva/giovani_responsive.webp';
import temponeRespImg from '../../assets/primitiva/tempone_responsive.webp';
---

<section id="about" class="bg-zinc-950 pt-24 pb-4 md:pt-32 md:pb-12 px-0 md:px-6 border-t border-zinc-900 selection:bg-white selection:text-black relative overflow-hidden">
    
    <!-- Blueprint Grid Background -->
    <div class="absolute inset-0 opacity-20 pointer-events-none z-0" style="background-image: radial-gradient(circle, #27272a 1px, transparent 1px); background-size: 40px 40px;"></div>
    <div class="absolute inset-0 opacity-10 pointer-events-none z-0" style="background-image: linear-gradient(#27272a 1px, transparent 1px), linear-gradient(90deg, #27272a 1px, transparent 1px); background-size: 160px 160px;"></div>

    <!-- Technical Annotations (Desktop Only) -->
    <div class="hidden lg:block absolute top-12 left-12 font-mono text-[8px] uppercase tracking-[0.3em] text-zinc-700 opacity-40 select-none z-0">
        <p>System.Identity.A_CELL // POS: 0.0.12</p>
        <p>Coordinate: 21.7642° S, 43.3503° W</p>
    </div>
    <div class="hidden lg:block absolute bottom-24 right-12 font-mono text-[8px] uppercase tracking-[0.3em] text-zinc-700 opacity-40 text-right select-none z-0">
        <p>LOG: DESCONSTRUINDO_O_GENÉRICO</p>
        <p>Built_With: Raw_Essence + Pure_Performance</p>
    </div>

    <div class="max-w-7xl mx-auto relative z-10">
        <!-- Título da Seção -->
        <div class="mb-16 md:mb-16 text-center px-10 reveal-up">
            <h2 class="text-4xl md:text-7xl font-serif leading-[1.1] text-white max-w-4xl mx-auto">
                Quem <span class="italic">projeta</span> <br>e quem <span class="italic">constrói.</span>
            </h2>
        </div>

        <!-- Cards Container (Mobile Carousel / Desktop Overlap Composition) -->
        <div class="relative">
            {/* MOBILE: Carousel Layout */}
            <div 
                id="about-carousel"
                class="flex md:hidden overflow-x-auto snap-x snap-mandatory scroll-smooth gap-5 px-6 pb-16 scrollbar-hide relative z-10"
            >
                {/* Card 1: Giovani (Mobile) */}
                <div class="flex-none w-[78vw] max-w-[300px] snap-center">
                    <div class="flex flex-col border-[1.5px] border-zinc-800 bg-zinc-950/80 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] reveal-up transition-all hover:border-zinc-700 duration-300 group h-full rounded-2xl overflow-hidden">
                        <div class="h-10 border-b-[1.5px] border-zinc-800 flex items-center px-4 gap-2 bg-zinc-900">
                            <div class="flex gap-1.5 opacity-50 group-hover:opacity-100 transition-opacity">
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#ff5f57]"></div>
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#febc2e]"></div>
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#28c840]"></div>
                            </div>
                            <span class="ml-auto font-mono text-[9px] uppercase tracking-wider text-zinc-600">
                                giovani.tsx
                            </span>
                        </div>
                        <div class="p-8 flex flex-col h-full">
                            <div class="flex items-center gap-4 mb-8">
                                <div class="w-16 h-16 shrink-0 border-[1.5px] border-zinc-800 p-1 bg-zinc-900 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] group-hover:border-zinc-700 transition-all overflow-hidden">
                                    <Image src={giovaniRespImg} alt="Giovani Lopes" class="w-full h-full object-cover grayscale brightness-90 group-hover:grayscale-0 group-hover:brightness-100 transition-all duration-500" />
                                </div>
                                <div>
                                    <h3 class="text-xl font-black uppercase tracking-tighter leading-none font-display mb-2 text-white">Giovani <br>Lopes</h3>
                                    <p class="font-mono text-[10px] text-zinc-500 tracking-tight">// ESTRATÉGIA & DESIGN</p>
                                </div>
                            </div>
                            <div class="space-y-4 flex-grow">
                                <p class="text-lg font-serif leading-relaxed text-zinc-300">Diretor de Design e Estratégia</p>
                                <p class="text-zinc-500 text-sm leading-relaxed font-sans">Giovani assegura que o design nunca seja apenas estético. Sua atuação funde a identidade da marca aos objetivos de negócio, garantindo que cada decisão criativa gere autoridade imediata e facilite a jornada de conversão do cliente.</p>
                            </div>
                        </div>
                    </div>
                </div>

                {/* Card 2: Gustavo (Mobile) */}
                <div class="flex-none w-[78vw] max-w-[300px] snap-center">
                    <div class="flex flex-col border-[1.5px] border-zinc-800 bg-zinc-900/50 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] reveal-up delay-100 transition-all hover:border-zinc-700 duration-300 group h-full rounded-2xl overflow-hidden">
                        <div class="h-10 border-b-[1.5px] border-zinc-800 flex items-center px-4 gap-2 bg-zinc-900">
                            <div class="flex gap-1.5 opacity-50 group-hover:opacity-100 transition-opacity">
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#ff5f57]"></div>
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#febc2e]"></div>
                                <div class="w-2.5 h-2.5 rounded-full border border-black/20 bg-[#28c840]"></div>
                            </div>
                            <span class="ml-auto font-mono text-[9px] uppercase tracking-wider text-zinc-600">
                                gustavo.tsx
                            </span>
                        </div>
                        <div class="p-8 flex flex-col h-full">
                            <div class="flex items-center gap-4 mb-8">
                                <div class="w-16 h-16 shrink-0 border-[1.5px] border-zinc-800 p-1 bg-zinc-900 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] group-hover:border-zinc-700 transition-all overflow-hidden">
                                    <Image src={temponeRespImg} alt="Gustavo Tempone" class="w-full h-full object-cover grayscale brightness-90 group-hover:grayscale-0 group-hover:brightness-100 transition-all duration-500" />
                                </div>
                                <div>
                                    <h3 class="text-xl font-black uppercase tracking-tighter leading-none font-display mb-2 text-white">Gustavo Tempone</h3>
                                    <p class="font-mono text-[10px] text-zinc-500 tracking-tight">// ENGENHARIA</p>
                                </div>
                            </div>
                            <div class="space-y-4 flex-grow">
                                <p class="text-lg font-serif leading-relaxed text-zinc-300">Engenheiro de Software Sênior.</p>
                                <p class="text-zinc-500 text-sm leading-relaxed font-sans">Gustavo materializa a estratégia em sistemas de altíssima velocidade. Com foco em engenharia de performance e código escalável, ele garante que as interfaces sejam tão rápidas e seguras quanto são visualmente impactantes.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                {/* Final Spacer */}
                <div class="flex-none w-[12vw]"></div>
            </div>



            {/* DESKTOP: Organic Overlap Layout with Entrance Reveal */}
            <div class="hidden md:flex justify-center items-center min-h-[500px] relative px-4 max-w-6xl mx-auto">
                
                {/* Decoration Labels */}
                <div class="absolute top-[20%] left-0 font-mono text-[10px] text-zinc-700 tracking-widest vertical-text select-none">01 // ESTRATÉGIA</div>
                <div class="absolute bottom-[20%] right-0 font-mono text-[10px] text-zinc-700 tracking-widest vertical-text select-none">02 // ENGENHARIA</div>

                <!-- Card 1: Giovani (Desktop) -->
                <div class="flex-none w-[420px] z-20 group reveal-encaixe-1">
                    <div class="flex flex-col border-[1.5px] border-zinc-800 bg-zinc-950 shadow-[10px_10px_0px_0px_rgba(0,0,0,1)] transition-all hover:border-zinc-500 hover:-translate-y-2 duration-500 rounded-2xl overflow-hidden">
                        <div class="h-10 border-b-[1.5px] border-zinc-800 flex items-center px-4 gap-2 bg-zinc-900">
                            <div class="flex gap-1.5 opacity-50 group-hover:opacity-100 transition-opacity">
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#ff5f57]"></div>
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#febc2e]"></div>
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#28c840]"></div>
                            </div>
                            <span class="ml-auto font-mono text-[10px] uppercase tracking-wider text-zinc-600">giovani.tsx</span>
                        </div>
                        <div class="p-10 flex flex-col h-full bg-gradient-to-br from-zinc-950 to-zinc-900/40">
                            <div class="flex items-center gap-6 mb-10">
                                <div class="w-24 h-24 shrink-0 border-[1.5px] border-zinc-800 p-1 bg-zinc-900 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] group-hover:border-zinc-600 transition-all overflow-hidden rotate-[-2deg] group-hover:rotate-0">
                                    <Image src={giovaniImg} alt="Giovani Lopes" class="w-full h-full object-cover grayscale brightness-90 group-hover:grayscale-0 group-hover:brightness-100 transition-all duration-500" />
                                </div>
                                <div>
                                    <h3 class="text-3xl font-black uppercase tracking-tighter leading-none font-display mb-2 text-white">Giovani <br>Lopes</h3>
                                    <p class="font-mono text-sm text-zinc-500 tracking-tight">// ESTRATÉGIA & DESIGN</p>
                                </div>
                            </div>
                            <div class="space-y-6 flex-grow">
                                <p class="text-xl font-serif leading-relaxed text-zinc-300">Diretor de Design e Estratégia</p>
                                <p class="text-zinc-500 leading-relaxed font-sans opacity-80 text-sm">Giovani assegura que o design nunca seja apenas estético. Sua atuação funde a identidade da marca aos objetivos de negócio, garantindo que cada decisão criativa gere autoridade imediata e facilite a jornada de conversão do cliente.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Gustavo (Desktop) -->
                <div class="flex-none w-[420px] -ml-10 z-30 group reveal-encaixe-2">
                    <div class="flex flex-col border-[1.5px] border-zinc-800 bg-zinc-950 shadow-[10px_10px_0px_0px_rgba(0,0,0,1)] transition-all hover:border-zinc-500 hover:-translate-y-2 duration-500 rounded-2xl overflow-hidden">
                        <div class="h-10 border-b-[1.5px] border-zinc-800 flex items-center px-4 gap-2 bg-zinc-900">
                            <div class="flex gap-1.5 opacity-50 group-hover:opacity-100 transition-opacity">
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#ff5f57]"></div>
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#febc2e]"></div>
                                <div class="w-3 h-3 rounded-full border border-black/20 bg-[#28c840]"></div>
                            </div>
                            <span class="ml-auto font-mono text-[10px] uppercase tracking-wider text-zinc-600">gustavo.tsx</span>
                        </div>
                        <div class="p-10 flex flex-col h-full bg-zinc-950">
                            <div class="flex items-center gap-6 mb-10">
                                <div class="w-24 h-24 shrink-0 border-[1.5px] border-zinc-800 p-1 bg-zinc-900 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] group-hover:border-zinc-600 transition-all overflow-hidden rotate-[2deg] group-hover:rotate-0">
                                    <Image src={temponeImg} alt="Gustavo Tempone" class="w-full h-full object-cover grayscale brightness-90 group-hover:grayscale-0 group-hover:brightness-100 transition-all duration-500" />
                                </div>
                                <div>
                                    <h3 class="text-3xl font-black uppercase tracking-tighter leading-none font-display mb-2 text-white">Gustavo Tempone</h3>
                                    <p class="font-mono text-sm text-zinc-500 tracking-tight">// ENGENHARIA</p>
                                </div>
                            </div>
                            <div class="space-y-6 flex-grow">
                                <p class="text-xl font-serif leading-relaxed text-zinc-300">Engenheiro de Software Sênior.</p>
                                <p class="text-zinc-500 leading-relaxed font-sans opacity-80 text-sm">Gustavo materializa a estratégia em sistemas de altíssima velocidade. Com foco em engenharia de performance e código escalável, ele garante que as interfaces sejam tão rápidas e seguras quanto são visualmente impactantes.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</section>

<!-- Agency Manifesto Section -->
<section id="manifesto" class="bg-[#050505] pt-0 pb-24 md:pt-0 md:pb-48 px-6 selection:bg-white selection:text-black relative overflow-hidden">
    
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 md:gap-32 items-center relative z-10">
        
        {/* Column 1: The Philosophy */}
        {/* Column 1: The Philosophy */}
        <div class="flex flex-col gap-6 md:gap-12">
             <h2 class="text-4xl md:text-5xl lg:text-6xl font-display text-white leading-[1.1] reveal-up">
                 Nosso processo <br>é estratégico, <br>técnico e <br />
                 <span class="text-zinc-500">próximo!</span>
             </h2>

             {/* Mobile-Only Visual Block (Reordered) */}
             <div class="relative h-[250px] w-full block md:hidden items-center justify-center pointer-events-none select-none my-4">
                 {/* Subtle Axis Line */}
                 <div class="absolute inset-y-0 left-1/2 w-px bg-gradient-to-b from-transparent via-zinc-900 to-transparent"></div>
    
                 {/* Floating Tags */}
                 <div class="absolute top-[15%] right-[10%] z-20 reveal-up delay-150">
                    <span class="px-5 py-2 rounded-full border border-zinc-800 bg-[#050505]/80 backdrop-blur-md text-[10px] font-mono text-zinc-300 tag-label hover:border-white/50 transition-colors shadow-2xl animate-float-slow inline-block">
                        [ DESIGN_ESTRATÉGICO ]
                    </span>
                 </div>
    
                 <div class="absolute top-[45%] left-[5%] z-10 w-max reveal-up delay-300">
                    <span class="px-6 py-3 rounded-full border border-zinc-700 bg-[#050505] text-xs font-mono text-white tag-label hover:border-white transition-colors shadow-2xl animate-float-medium inline-block">
                        [ PARCERIA_DE_NEGÓCIO ]
                    </span>
                 </div>
    
                 <div class="absolute bottom-[15%] right-[5%] z-20 reveal-up delay-500">
                    <span class="px-5 py-2 rounded-full border border-zinc-800 bg-[#050505]/80 backdrop-blur-md text-[10px] font-mono text-zinc-300 tag-label hover:border-white/50 transition-colors shadow-2xl animate-float-reverse inline-block">
                         [ ENGENHARIA_DE_ALTO_NIVEL ]
                    </span>
                 </div>
            </div>
             
             <div class="space-y-8 text-lg md:text-xl font-light text-zinc-400 leading-relaxed max-w-xl reveal-up delay-700">
                <p>
                    Projetar autoridade e engenharia de alto nível exige o carinho de quem realmente coloca a mão na massa. Aqui, seu projeto é construído com a dedicação de quem se importa com o resultado tanto quanto você. Cada entrega carrega nossa assinatura com orgulho.
                </p>
             </div>
        </div>

        {/* Column 2: The Machine (Simplified - Desktop Only) */}
        <div class="relative h-[250px] md:h-[400px] w-full hidden md:flex items-center justify-center pointer-events-none select-none reveal-up delay-200">
             
             {/* Subtle Axis Line */}
             <div class="absolute inset-y-0 left-1/2 w-px bg-gradient-to-b from-transparent via-zinc-900 to-transparent"></div>

             {/* Floating Tags */}
             <div class="absolute animate-float-slow top-[15%] right-[10%] md:right-[20%] z-20">
                <span class="px-5 py-2 rounded-full border border-zinc-800 bg-[#050505]/80 backdrop-blur-md text-[10px] md:text-xs font-mono text-zinc-300 tag-label hover:border-white/50 transition-colors shadow-2xl">
                    [ DESIGN_ESTRATÉGICO ]
                </span>
             </div>

             <div class="absolute animate-float-medium top-[45%] left-[5%] md:left-[10%] z-10 w-max">
                <span class="px-6 py-3 rounded-full border border-zinc-700 bg-[#050505] text-xs md:text-sm font-mono text-white tag-label hover:border-white transition-colors shadow-2xl">
                    [ PARCERIA_DE_NEGÓCIO ]
                </span>
             </div>

             <div class="absolute animate-float-reverse bottom-[15%] right-[5%] md:right-[10%] z-20">
                <span class="px-5 py-2 rounded-full border border-zinc-800 bg-[#050505]/80 backdrop-blur-md text-[10px] md:text-xs font-mono text-zinc-300 tag-label hover:border-white/50 transition-colors shadow-2xl">
                     [ ENGENHARIA_DE_ALTO_NIVEL ]
                </span>
             </div>
        </div>

    </div>
</section>

<style>
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
    }
    @keyframes float-reverse {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(15px); }
    }

    .animate-float-slow {
        animation: float 6s ease-in-out infinite;
    }
    .animate-float-medium {
        animation: float 5s ease-in-out infinite;
    }
    .animate-float-reverse {
        animation: float-reverse 7s ease-in-out infinite;
    }

    .reveal-up {
        opacity: 0;
        transform: translateY(30px);
        transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .reveal-up.active {
        opacity: 1;
        transform: translateY(0);
    }
    .tag-label {
        cursor: crosshair;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .vertical-text {
        writing-mode: vertical-rl;
        text-orientation: mixed;
    }

    /* Animation States for Encaixe Reveal (Desktop Only) */
    @media (min-width: 768px) {
        .reveal-encaixe-1 {
            opacity: 0;
            transform: translateY(120px);
            transition: opacity 0.8s ease-out, transform 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-encaixe-2 {
            opacity: 0;
            transform: translateY(180px);
            transition: opacity 0.8s ease-out, transform 1s cubic-bezier(0.16, 1, 0.3, 1);
            transition-delay: 0.2s;
        }

        .reveal-encaixe-1.active {
            opacity: 1;
            transform: translateY(-3rem); /* md:-translate-y-12 */
        }
        .reveal-encaixe-2.active {
            opacity: 1;
            transform: translateY(3rem); /* md:translate-y-12 */
        }
    }
</style>

<script>
    const setupAbout = () => {
        // Carousel Logic
        const carousel = document.getElementById('about-carousel');
        const dots = document.querySelectorAll('.about-dot');

        if (carousel && dots.length > 0) {
            const handleScroll = () => {
                const scrollLeft = carousel.scrollLeft;
                const width = carousel.offsetWidth;
                const index = Math.round(scrollLeft / width);
                dots.forEach((dot, idx) => {
                    const dotEl = dot as HTMLElement;
                    if (idx === index) {
                        dotEl.classList.add('bg-white');
                        dotEl.classList.remove('bg-transparent');
                    } else {
                        dotEl.classList.remove('bg-white');
                        dotEl.classList.add('bg-transparent');
                    }
                });
            };
            carousel.addEventListener('scroll', handleScroll, { passive: true });
            
            // Initial check
            handleScroll();
        }

        // Reveal Observer for Custom Entrance
        const observerOptions = {
            threshold: 0.15,
            rootMargin: "0px 0px -50px 0px"
        };

        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    revealObserver.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.reveal-encaixe-1, .reveal-encaixe-2, .reveal-up').forEach(el => {
            revealObserver.observe(el);
        });
    };

    // Run on both initial load and page transitions
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupAbout);
    } else {
        setupAbout();
    }
    document.addEventListener('astro:page-load', setupAbout);
</script>
